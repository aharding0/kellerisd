<html lang="en">
  <head>
    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="104792764153-p2lcgg3f1phjc4etgb1u8phr76qn502k.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
  </head>
  <body>
    <form name="gform" id="gform" enctype="text/plain" action="https://docs.google.com/forms/d/1XulJGqHFkHp3pAXDBBftq2urhUQ5xokCxvupk_bA3Uo/formResponse?" target="hidden_iframe" onsubmit="submitted=true;">
        <label>First name:</label><br>
        <input type="text" name="entry.935827892" id="entry.935827892"><br>
        <label>Last name:</label><br>
        <input type="text" name="entry.1331858140" id="entry.1331858140">
        <input type="hidden" name="entry.2122624819" id="entry.2122624819">
        <input type="submit" value="Submit">
        <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
      </form>
     
      <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;" onload="if(submitted) {}"></iframe>
   
    <p id="demo"></p>
    <script>
      function onSignIn(googleUser) {
        // Useful data for your client-side scripts:
        var profile = googleUser.getBasicProfile();
        //console.log("ID: " + profile.getId()); // Don't send this directly to your server!
        //console.log('Full Name: ' + profile.getName());
        //console.log('Given Name: ' + profile.getGivenName());
        //console.log('Family Name: ' + profile.getFamilyName());
        //console.log("Image URL: " + profile.getImageUrl());
        var email = profile.getEmail();
        if(email.includes("@kellerisd.net"))
        {
            document.getElementById("entry.2122624819").value = email;
        }
        else{signOut();}
        var firstname = "";
        var lastname = "";
        if(profile.getGivenName()){
            firstname = profile.getGivenName();
            document.getElementById("entry.935827892").value = firstname;
        }
        if(profile.getGivenName()){
            lastname = profile.getFamilyName();
            document.getElementById("entry.1331858140").value = lastname;
        }
        
      }

    function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
    console.log('User signed out.');
    });
  }

    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript">var submitted=false;</script>
    <script type="text/javascript">
    $('#gform').on('submit', function(e) {
        $(window).scrollTop(0);
        $('#gform *').fadeOut(2000);
        $('#gform').prepend('Your submission has been processed...');
    });
</script>
  </body>
</html>
