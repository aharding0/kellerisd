<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
* {
  box-sizing: border-box;
}

#myInput {
  background-image: url('/css/searchicon.png');
  background-position: 10px 10px;
  background-repeat: no-repeat;
  width: 100%;
  font-size: 16px;
  padding: 12px 20px 12px 40px;
  border: 1px solid #ddd;
  margin-bottom: 12px;
}

#myTable {
  border-collapse: collapse;
  width: 100%;
  border: 1px solid #ddd;
  font-size: 18px;
}

#myTable th, #myTable td {
  text-align: left;
  padding: 12px;
}

#myTable tr {
  border-bottom: 1px solid #ddd;
}

#myTable tr.header, #myTable tr:hover {
  background-color: #f1f1f1;
}
</style>
</head>
<body>

<input type="search" id="myInput" onkeyup="myFunction();" onchange="myFunction();" onkeypress="myFunction();" onpaste="myFunction();" oninput="myFunction();" onsearch="this.onkeyup();" placeholder="Search" title="Type in a name">
<div style="overflow:scroll; height:250px;">
<table id="myTable">
  <tr class="header">
    <th style="width:60%;">Item</th>
    <th style="width:40%;">Price</th>
    <th>Quantity</th>
    <th>Keywords</th>
  </tr>
  <tr>
    <td id="name1">Strawberry Parfait</td>
    <td id="price1">$3.50</td>
    <td><select id="qty1"><option>0</option><option>1</option><option>2</option><option>3</option></select><input id="btn1" style="background-color:red;color:white;" type="button" value="x" onclick="document.getElementById('qty1').value='0';calc();" /></td>
    <td style="font-size: 8pt;">cold strawberry greek yogurt whole grain oats peanut-free</td>
  </tr>
  <tr>
    <td id="name2">Cookies</td>
    <td id="price2">$2.25</td>
    <td><select id="qty2"><option>0</option><option>1</option><option>2</option><option>3</option></select><input id="btn2" style="background-color:red;color:white;" type="button" value="x" onclick="document.getElementById('qty2').value='0';calc();" /></td>
    <td></td>
  </tr>
  <tr>
    <td id="name3">Water</td>
    <td id="price3">$1.70</td>
    <td><select id="qty3"><option>0</option><option>1</option><option>2</option><option>3</option></select><input id="btn3" style="background-color:red;color:white;" type="button" value="x" onclick="document.getElementById('qty3').value='0';calc();" /></td>
    <td style="font-size: 8pt;">cold low calories</td>
  </tr>
  <tr>
    <td id="name4">Brisket</td>
    <td id="price4">$7.50</td>
    <td><select id="qty4"><option>0</option><option>1</option><option>2</option><option>3</option></select><input id="btn4" style="background-color:red;color:white;" type="button" value="x" onclick="document.getElementById('qty4').value='0';calc();" /></td>
    <td style="font-size: 8pt;">high protein beef</td>
  </tr>
  <tr>
    <td id="name5">Jello</td>
    <td id="price5">$1.20</td>
    <td><select id="qty5"><option>0</option><option>1</option><option>2</option><option>3</option></select><input id="btn5" style="background-color:red;color:white;" type="button" value="x" onclick="document.getElementById('qty5').value='0';calc();" /></td>
    <td style="font-size: 8pt;">blue</td>
  </tr>
  <tr>
    <td id="name6">Cheesecake</td>
    <td id="price6">$10.70</td>
    <td><select id="qty6"><option>0</option><option>1</option><option>2</option><option>3</option></select><input id="btn6" style="background-color:red;color:white;" type="button" value="x" onclick="document.getElementById('qty6').value='0';calc();" /></td>
    <td style="font-size: 8pt;">fun</td>
  </tr>
  <tr>
    <td id="name7">Fruit Smoothie</td>
    <td id="price7">$3.50</td>
    <td><select id="qty7"><option>0</option><option>1</option><option>2</option><option>3</option></select><input id="btn7" style="background-color:red;color:white;" type="button" value="x" onclick="document.getElementById('qty7').value='0';calc();" /></td>
    <td style="font-size: 8pt;"></td>
  </tr>
  <tr>
    <td id="name8">Pie</td>
    <td id="price8">$2.25</td>
    <td><select id="qty8"><option>0</option><option>1</option><option>2</option><option>3</option></select><input id="btn8" style="background-color:red;color:white;" type="button" value="x" onclick="document.getElementById('qty8').value='0';calc();" /></td>
    <td style="font-size: 8pt;"></td>
  </tr>
</table>
</div>
<script>

var total = 0;
var qty = [];
var item = [];
var price = [];
var input, filter, table, tr, td, cell, i, j;
table = document.getElementById("myTable");
tr = table.getElementsByTagName("tr");
for (i = 1; i < tr.length; i++) {
      //item[i] = document.getElementById("item"+i).innerHTML;
      price[i] = parseFloat(document.getElementById("price"+i).innerHTML.replace(/[$]/g, ""));
      qty[i] = document.getElementById("qty"+i).value;
      
      document.getElementById("qty"+i).addEventListener("change", calc);
}


  function myFunction() {
  var input, filter, table, tr, td, cell, i, j;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("myTable");
  tr = table.getElementsByTagName("tr");
  for (i = 1; i < tr.length; i++) {
   
    tr[i].style.display = "none";
  
    td = tr[i].getElementsByTagName("td");
    for (var j = 0; j < td.length; j++) {
      cell = tr[i].getElementsByTagName("td")[j];
      if (cell) {
        if (cell.innerHTML.toUpperCase().indexOf(filter) > -1) {
          tr[i].style.display = "";
          break;
        } 
      }
    }
  }

}

function calc(){
total = 0;
	for (i = 1; i < tr.length; i++) {
  price[i] = parseFloat(document.getElementById("price"+i).innerHTML.replace(/[$]/g, ""));
      qty[i] = document.getElementById("qty"+i).value;
		total += price[i]*qty[i];
	}
document.getElementById("total").textContent= "$" + total.toFixed(2);
}

function showOrder() {
    // Select the 'myInput' search box, and set it's value to an empty String
    document.getElementById("myInput").value = "";
    myFunction();
    // Call seach, which should reset the result list
    total = 0;
    var qty = [];
    var item = [];
    var price = [];
    var input, filter, table, tr, td, cell, i, j;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("myTable");
  tr = table.getElementsByTagName("tr");
  for (i = 1; i < tr.length; i++) {
   
    tr[i].style.display = "none";
  	qty[i] = document.getElementById("qty"+i).value;
    //item[i] = document.getElementById("item"+i).textContent;
    price[i] = parseFloat(document.getElementById("price"+i).innerHTML.replace(/[$]/g, ""));
    td = tr[i].getElementsByTagName("td");
    for (var j = 0; j < td.length; j++) {
      cell = tr[i].getElementsByTagName("td")[2];
      if (cell) {
        if (qty[i]>0) {
          tr[i].style.display = "";
          total += price[i]*qty[i];
          document.getElementById("total").textContent= "$" + total.toFixed(2);
          break;
        }
        else{tr[i].style.display = "none";}
      }
    }
  }
  
    
  }
  
  function showAll(){
    document.getElementById("myInput").value = "";
    myFunction();
  }
</script>
<br>
Order Total: <span id="total"></span>
<br>
<br>
<button id="showOrder" onclick="showOrder()">Show Order</button>
<button id="showAll" onclick="showAll()">Show All Items</button>

</body>
</html>
